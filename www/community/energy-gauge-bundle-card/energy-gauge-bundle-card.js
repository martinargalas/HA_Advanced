function e(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r}const t=window,o=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),n=new WeakMap;class s{constructor(e,t,o){if(this._$cssResult$=!0,o!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(o&&void 0===e){const o=void 0!==t&&1===t.length;o&&(e=n.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),o&&n.set(t,e))}return e}toString(){return this.cssText}}const r=(e,...t)=>{const o=1===e.length?e[0]:t.reduce(((t,o,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+e[i+1]),e[0]);return new s(o,e,i)},a=o?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const o of e.cssRules)t+=o.cssText;return(e=>new s("string"==typeof e?e:e+"",void 0,i))(t)})(e):e;var l;const u=window,c=u.trustedTypes,d=c?c.emptyScript:"",h=u.reactiveElementPolyfillSupport,p={toAttribute(e,t){switch(t){case Boolean:e=e?d:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let o=e;switch(t){case Boolean:o=null!==e;break;case Number:o=null===e?null:Number(e);break;case Object:case Array:try{o=JSON.parse(e)}catch(e){o=null}}return o}},m=(e,t)=>t!==e&&(t==t||e==e),g={attribute:!0,type:String,converter:p,reflect:!1,hasChanged:m};class f extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,o)=>{const i=this._$Ep(o,t);void 0!==i&&(this._$Ev.set(i,o),e.push(i))})),e}static createProperty(e,t=g){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const o="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,o,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,o){return{get(){return this[t]},set(i){const n=this[e];this[t]=i,this.requestUpdate(e,n,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||g}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const o of t)this.createProperty(o,e[o])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const o=new Set(e.flat(1/0).reverse());for(const e of o)t.unshift(a(e))}else void 0!==e&&t.push(a(e));return t}static _$Ep(e,t){const o=t.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof e?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,o;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(o=e.hostConnected)||void 0===o||o.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const i=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,i)=>{o?e.adoptedStyleSheets=i.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):i.forEach((o=>{const i=document.createElement("style"),n=t.litNonce;void 0!==n&&i.setAttribute("nonce",n),i.textContent=o.cssText,e.appendChild(i)}))})(i,this.constructor.elementStyles),i}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,o){this._$AK(e,o)}_$EO(e,t,o=g){var i;const n=this.constructor._$Ep(e,o);if(void 0!==n&&!0===o.reflect){const s=(void 0!==(null===(i=o.converter)||void 0===i?void 0:i.toAttribute)?o.converter:p).toAttribute(t,o.type);this._$El=e,null==s?this.removeAttribute(n):this.setAttribute(n,s),this._$El=null}}_$AK(e,t){var o;const i=this.constructor,n=i._$Ev.get(e);if(void 0!==n&&this._$El!==n){const e=i.getPropertyOptions(n),s="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(o=e.converter)||void 0===o?void 0:o.fromAttribute)?e.converter:p;this._$El=n,this[n]=s.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,o){let i=!0;void 0!==e&&(((o=o||this.constructor.getPropertyOptions(e)).hasChanged||m)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===o.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,o))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const o=this._$AL;try{t=this.shouldUpdate(o),t?(this.willUpdate(o),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(o)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(o)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}var _;f.finalized=!0,f.elementProperties=new Map,f.elementStyles=[],f.shadowRootOptions={mode:"open"},null==h||h({ReactiveElement:f}),(null!==(l=u.reactiveElementVersions)&&void 0!==l?l:u.reactiveElementVersions=[]).push("1.6.1");const v=window,y=v.trustedTypes,b=y?y.createPolicy("lit-html",{createHTML:e=>e}):void 0,w="$lit$",$=`lit$${(Math.random()+"").slice(9)}$`,A="?"+$,k=`<${A}>`,S=document,E=()=>S.createComment(""),j=e=>null===e||"object"!=typeof e&&"function"!=typeof e,x=Array.isArray,C="[ \t\n\f\r]",T=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,O=/-->/g,z=/>/g,N=RegExp(`>|${C}(?:([^\\s"'>=/]+)(${C}*=${C}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),M=/'/g,P=/"/g,D=/^(?:script|style|textarea|title)$/i,H=(e,...t)=>({_$litType$:1,strings:e,values:t}),U=Symbol.for("lit-noChange"),I=Symbol.for("lit-nothing"),R=new WeakMap,q=S.createTreeWalker(S,129,null,!1);class L{constructor({strings:e,_$litType$:t},o){let i;this.parts=[];let n=0,s=0;const r=e.length-1,a=this.parts,[l,u]=((e,t)=>{const o=e.length-1,i=[];let n,s=2===t?"<svg>":"",r=T;for(let t=0;t<o;t++){const o=e[t];let a,l,u=-1,c=0;for(;c<o.length&&(r.lastIndex=c,l=r.exec(o),null!==l);)c=r.lastIndex,r===T?"!--"===l[1]?r=O:void 0!==l[1]?r=z:void 0!==l[2]?(D.test(l[2])&&(n=RegExp("</"+l[2],"g")),r=N):void 0!==l[3]&&(r=N):r===N?">"===l[0]?(r=null!=n?n:T,u=-1):void 0===l[1]?u=-2:(u=r.lastIndex-l[2].length,a=l[1],r=void 0===l[3]?N:'"'===l[3]?P:M):r===P||r===M?r=N:r===O||r===z?r=T:(r=N,n=void 0);const d=r===N&&e[t+1].startsWith("/>")?" ":"";s+=r===T?o+k:u>=0?(i.push(a),o.slice(0,u)+w+o.slice(u)+$+d):o+$+(-2===u?(i.push(void 0),t):d)}const a=s+(e[o]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==b?b.createHTML(a):a,i]})(e,t);if(this.el=L.createElement(l,o),q.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=q.nextNode())&&a.length<r;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith(w)||t.startsWith($)){const o=u[s++];if(e.push(t),void 0!==o){const e=i.getAttribute(o.toLowerCase()+w).split($),t=/([.?@])?(.*)/.exec(o);a.push({type:1,index:n,name:t[2],strings:e,ctor:"."===t[1]?Y:"?"===t[1]?Z:"@"===t[1]?J:V})}else a.push({type:6,index:n})}for(const t of e)i.removeAttribute(t)}if(D.test(i.tagName)){const e=i.textContent.split($),t=e.length-1;if(t>0){i.textContent=y?y.emptyScript:"";for(let o=0;o<t;o++)i.append(e[o],E()),q.nextNode(),a.push({type:2,index:++n});i.append(e[t],E())}}}else if(8===i.nodeType)if(i.data===A)a.push({type:2,index:n});else{let e=-1;for(;-1!==(e=i.data.indexOf($,e+1));)a.push({type:7,index:n}),e+=$.length-1}n++}}static createElement(e,t){const o=S.createElement("template");return o.innerHTML=e,o}}function F(e,t,o=e,i){var n,s,r,a;if(t===U)return t;let l=void 0!==i?null===(n=o._$Co)||void 0===n?void 0:n[i]:o._$Cl;const u=j(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==u&&(null===(s=null==l?void 0:l._$AO)||void 0===s||s.call(l,!1),void 0===u?l=void 0:(l=new u(e),l._$AT(e,o,i)),void 0!==i?(null!==(r=(a=o)._$Co)&&void 0!==r?r:a._$Co=[])[i]=l:o._$Cl=l),void 0!==l&&(t=F(e,l._$AS(e,t.values),l,i)),t}class W{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:o},parts:i}=this._$AD,n=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:S).importNode(o,!0);q.currentNode=n;let s=q.nextNode(),r=0,a=0,l=i[0];for(;void 0!==l;){if(r===l.index){let t;2===l.type?t=new B(s,s.nextSibling,this,e):1===l.type?t=new l.ctor(s,l.name,l.strings,this,e):6===l.type&&(t=new K(s,this,e)),this._$AV.push(t),l=i[++a]}r!==(null==l?void 0:l.index)&&(s=q.nextNode(),r++)}return n}v(e){let t=0;for(const o of this._$AV)void 0!==o&&(void 0!==o.strings?(o._$AI(e,o,t),t+=o.strings.length-2):o._$AI(e[t])),t++}}class B{constructor(e,t,o,i){var n;this.type=2,this._$AH=I,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=o,this.options=i,this._$Cp=null===(n=null==i?void 0:i.isConnected)||void 0===n||n}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=F(this,e,t),j(e)?e===I||null==e||""===e?(this._$AH!==I&&this._$AR(),this._$AH=I):e!==this._$AH&&e!==U&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>x(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==I&&j(this._$AH)?this._$AA.nextSibling.data=e:this.$(S.createTextNode(e)),this._$AH=e}g(e){var t;const{values:o,_$litType$:i}=e,n="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=L.createElement(i.h,this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===n)this._$AH.v(o);else{const e=new W(n,this),t=e.u(this.options);e.v(o),this.$(t),this._$AH=e}}_$AC(e){let t=R.get(e.strings);return void 0===t&&R.set(e.strings,t=new L(e)),t}T(e){x(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let o,i=0;for(const n of e)i===t.length?t.push(o=new B(this.k(E()),this.k(E()),this,this.options)):o=t[i],o._$AI(n),i++;i<t.length&&(this._$AR(o&&o._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var o;for(null===(o=this._$AP)||void 0===o||o.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class V{constructor(e,t,o,i,n){this.type=1,this._$AH=I,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=n,o.length>2||""!==o[0]||""!==o[1]?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=I}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,o,i){const n=this.strings;let s=!1;if(void 0===n)e=F(this,e,t,0),s=!j(e)||e!==this._$AH&&e!==U,s&&(this._$AH=e);else{const i=e;let r,a;for(e=n[0],r=0;r<n.length-1;r++)a=F(this,i[o+r],t,r),a===U&&(a=this._$AH[r]),s||(s=!j(a)||a!==this._$AH[r]),a===I?e=I:e!==I&&(e+=(null!=a?a:"")+n[r+1]),this._$AH[r]=a}s&&!i&&this.j(e)}j(e){e===I?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class Y extends V{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===I?void 0:e}}const G=y?y.emptyScript:"";class Z extends V{constructor(){super(...arguments),this.type=4}j(e){e&&e!==I?this.element.setAttribute(this.name,G):this.element.removeAttribute(this.name)}}class J extends V{constructor(e,t,o,i,n){super(e,t,o,i,n),this.type=5}_$AI(e,t=this){var o;if((e=null!==(o=F(this,e,t,0))&&void 0!==o?o:I)===U)return;const i=this._$AH,n=e===I&&i!==I||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,s=e!==I&&(i===I||n);n&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,o;"function"==typeof this._$AH?this._$AH.call(null!==(o=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==o?o:this.element,e):this._$AH.handleEvent(e)}}class K{constructor(e,t,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){F(this,e)}}const Q=v.litHtmlPolyfillSupport;var X,ee;null==Q||Q(L,B),(null!==(_=v.litHtmlVersions)&&void 0!==_?_:v.litHtmlVersions=[]).push("2.7.3");class te extends f{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const o=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=o.firstChild),o}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,o)=>{var i,n;const s=null!==(i=null==o?void 0:o.renderBefore)&&void 0!==i?i:t;let r=s._$litPart$;if(void 0===r){const e=null!==(n=null==o?void 0:o.renderBefore)&&void 0!==n?n:null;s._$litPart$=r=new B(t.insertBefore(E(),e),e,void 0,null!=o?o:{})}return r._$AI(e),r})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return U}}te.finalized=!0,te._$litElement$=!0,null===(X=globalThis.litElementHydrateSupport)||void 0===X||X.call(globalThis,{LitElement:te});const oe=globalThis.litElementPolyfillSupport;null==oe||oe({LitElement:te}),(null!==(ee=globalThis.litElementVersions)&&void 0!==ee?ee:globalThis.litElementVersions=[]).push("3.3.2");const ie=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:o,elements:i}=t;return{kind:o,elements:i,finisher(t){customElements.define(e,t)}}})(e,t),ne=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(o){o.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(o){o.createProperty(t.key,e)}};function se(e){return(t,o)=>void 0!==o?((e,t,o)=>{t.constructor.createProperty(o,e)})(e,t,o):ne(e,t)}function re(e){return se({...e,state:!0})}var ae;null===(ae=window.HTMLSlotElement)||void 0===ae||ae.prototype.assignedElements;const le=t=>{class o extends t{connectedCallback(){super.connectedCallback(),this.__checkSubscribed()}disconnectedCallback(){super.disconnectedCallback(),this.hassUnsubscribe()}updated(e){super.updated(e),e.has("hass")&&this.__checkSubscribed()}resetSubscriptions(){this.hassUnsubscribe(),this.__checkSubscribed()}hassSubscribe(){return[]}hassUnsubscribe(){if(this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then((e=>e())):e()}this.__unsubs=void 0}}__checkSubscribed(){void 0===this.__unsubs&&this.isConnected&&void 0!==this.hass&&(this.__unsubs=this.hassSubscribe())}}return e([se({attribute:!1})],o.prototype,"hass",void 0),o};function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function ce(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function de(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function he(e){de(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===ue(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function pe(e,t){de(2,arguments);var o=he(e).getTime(),i=ce(t);return new Date(o+i)}function me(e,t){return de(2,arguments),pe(e,36e5*ce(t))}function ge(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function fe(e){de(1,arguments);var t=he(e);return t.setHours(0,0,0,0),t}function _e(e,t){var o=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return o<0?-1:o>0?1:o}function ve(){return function(e){de(1,arguments);var t=he(e);return t.setHours(23,59,59,999),t}(Date.now())}function ye(){return fe(Date.now())}const be=e=>{let t=[];function o(o,i){e=i?o:Object.assign(Object.assign({},e),o);let n=t;for(let t=0;t<n.length;t++)n[t](e)}return{get state(){return e},action(t){function i(e){o(e,!1)}return function(){let o=[e];for(let e=0;e<arguments.length;e++)o.push(arguments[e]);let n=t.apply(this,o);if(null!=n)return n instanceof Promise?n.then(i):i(n)}},setState:o,subscribe:e=>(t.push(e),()=>{!function(e){let o=[];for(let i=0;i<t.length;i++)t[i]===e?e=null:o.push(t[i]);t=o}(e)})}},we=(e,t)=>{const o={};return t&&(t.type&&(o.type_filter=t.type),t.domain&&(o.domain=t.domain)),e.callWS(Object.assign({type:"config_entries/get"},o))},$e=(e,t,o,i,n="hour",s,r)=>e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:null==o?void 0:o.toISOString(),statistic_ids:i,period:n,units:s,types:r}),Ae=e=>{if(!e||e.length<2)return null;const t=e[e.length-1].sum;if(null==t)return null;const o=e[0].sum;return null==o?t:t-o},ke=(e,t)=>{let o=null;for(const i of t){if(!(i in e))continue;const t=Ae(e[i]);null!==t&&(null===o?o=t:o+=t)}return o},Se=[],Ee=e=>e.callWS({type:"energy/info"}),je=async(e,t,o,i,n,s="hour")=>e.callWS({type:"energy/fossil_energy_consumption",start_time:t.toISOString(),end_time:null==n?void 0:n.toISOString(),energy_statistic_ids:o,co2_statistic_id:i,period:s}),xe=(e,t,o)=>{const i=[];for(const n of e.energy_sources)if(!o||o.includes(n.type))if("solar"!==n.type)if("gas"!==n.type&&"water"!==n.type)if("battery"!==n.type){for(const e of n.flow_from){i.push(e.stat_energy_from),e.stat_cost&&i.push(e.stat_cost);const o=t.cost_sensors[e.stat_energy_from];o&&i.push(o)}for(const e of n.flow_to){i.push(e.stat_energy_to),e.stat_compensation&&i.push(e.stat_compensation);const o=t.cost_sensors[e.stat_energy_to];o&&i.push(o)}}else i.push(n.stat_energy_from),i.push(n.stat_energy_to);else{i.push(n.stat_energy_from),n.stat_cost&&i.push(n.stat_cost);const e=t.cost_sensors[n.stat_energy_from];e&&i.push(e)}else i.push(n.stat_energy_from);return i},Ce=async(e,t,o,i,n)=>{const[s,r]=await Promise.all([we(e,{domain:"co2signal"}),Ee(e)]),a=s.length?s[0]:void 0;let l;if(a)for(const t of Object.values(e.entities)){if("co2signal"!==t.platform)continue;const o=e.states[t.entity_id];if(o&&"%"===o.attributes.unit_of_measurement){l=o.entity_id;break}}const u=[];for(const e of t.energy_sources)if("grid"===e.type)for(const t of e.flow_from)u.push(t.stat_energy_from);const c=xe(t,r,["grid","solar","battery","gas"]),d=xe(t,r,["water"]),h=[...c,...d],p=function(e,t){de(2,arguments);var o=he(e),i=he(t),n=_e(o,i),s=Math.abs(function(e,t){de(2,arguments);var o=fe(e),i=fe(t),n=o.getTime()-ge(o),s=i.getTime()-ge(i);return Math.round((n-s)/864e5)}(o,i));o.setDate(o.getDate()-n*s);var r=n*(s-Number(_e(o,i)===-n));return 0===r?0:r}(i||new Date,o),m=p>35?"month":p>2?"day":"hour",g=me(o,-1),f=e.config.unit_system.length||"",_={energy:"kWh",volume:"km"===f?"m³":"ft³"},v={volume:"km"===f?"L":"gal"},y=c.length?$e(e,g,i,c,m,_,["sum"]):{},b=d.length?$e(e,g,i,d,m,v,["sum"]):{};let w,$,A,k,S,E={},j={};if(n){$=p>27&&p<32?function(e,t){de(2,arguments);var o=he(e),i=ce(t);if(isNaN(i))return new Date(NaN);if(!i)return o;var n=o.getDate(),s=new Date(o.getTime());return s.setMonth(o.getMonth()+i+1,0),n>=s.getDate()?s:(o.setFullYear(s.getFullYear(),s.getMonth(),n),o)}(o,-1):function(e,t){de(2,arguments);var o=he(e),i=ce(t);return isNaN(i)?new Date(NaN):i?(o.setDate(o.getDate()+i),o):o}(o,-1*(p+1));const t=me($,-1);A=pe(o,-1),c.length&&(E=$e(e,t,A,c,m,_,["sum"])),d.length&&(j=$e(e,t,A,d,m,v,["sum"]))}void 0!==l&&(k=je(e,o,u,l,i,p>35?"month":p>2?"day":"hour"),n&&(S=je(e,$,u,l,A,p>35?"month":p>2?"day":"hour")));const x={},C=h.length?((e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}))(e,h):[],[T,O,z,N,M,P,D]=await Promise.all([y,b,E,j,C,k,S]),H=Object.assign(Object.assign({},T),O);return n&&(w=Object.assign(Object.assign({},z),N)),h.length&&M.forEach((e=>{x[e.statistic_id]=e})),Object.values(H).forEach((e=>{e.length&&new Date(e[0].start)>g&&e.unshift(Object.assign(Object.assign({},e[0]),{start:g.getTime(),end:g.getTime(),sum:0,state:0}))})),{start:o,end:i,startCompare:$,endCompare:A,info:r,prefs:t,stats:H,statsMetadata:x,statsCompare:w,co2SignalConfigEntry:a,co2SignalEntity:l,fossilEnergyConsumption:P,fossilEnergyConsumptionCompare:D}},Te=(e,t={})=>{let o="_energy";if(t.key){if(!t.key.startsWith("energy_"))throw new Error("Key need to start with energy_");o=`_${t.key}`}if(e.connection[o])return e.connection[o];Se.push(t.key);const i=((e,t,o,i)=>{if(e[t])return e[t];let n,s,r=0,a=be();const l=()=>{if(!o)throw new Error("Collection does not support refresh");return o(e).then((e=>a.setState(e,!0)))},u=()=>l().catch((t=>{if(e.connected)throw t})),c=()=>{s=void 0,n&&n.then((e=>{e()})),e.removeEventListener("ready",l),e.removeEventListener("disconnected",d)},d=()=>{s&&(clearTimeout(s),c())};return e[t]={get state(){return a.state},refresh:l,subscribe(t){r++,1===r&&(()=>{if(void 0!==s)return clearTimeout(s),void(s=void 0);i&&(n=i(e,a)),o&&(e.addEventListener("ready",u),u()),e.addEventListener("disconnected",d)})();const l=a.subscribe(t);return void 0!==a.state&&setTimeout((()=>t(a.state)),0),()=>{l(),r--,r||(s=setTimeout(c,5e3))}}},e[t]})(e.connection,o,(async()=>{if(i.prefs||(i.prefs=await(e=>e.callWS({type:"energy/get_prefs"}))(e)),i._refreshTimeout&&clearTimeout(i._refreshTimeout),i._active&&(!i.end||i.end>new Date)){const e=new Date;e.getMinutes()>=20&&e.setHours(e.getHours()+1),e.setMinutes(20,0,0),i._refreshTimeout=window.setTimeout((()=>i.refresh()),e.getTime()-Date.now())}return Ce(e,i.prefs,i.start,i.end,i.compare)})),n=i.subscribe;i.subscribe=e=>{const t=n(e);return i._active++,()=>{i._active--,i._active<1&&(clearTimeout(i._refreshTimeout),i._refreshTimeout=void 0),t()}},i._active=0,i.prefs=t.prefs;const s=new Date;i.start=s.getHours()>0?ye():function(){var e=new Date,t=e.getFullYear(),o=e.getMonth(),i=e.getDate(),n=new Date(0);return n.setFullYear(t,o,i-1),n.setHours(0,0,0,0),n}(),i.end=s.getHours()>0?ve():function(){var e=new Date,t=e.getFullYear(),o=e.getMonth(),i=e.getDate(),n=new Date(0);return n.setFullYear(t,o,i-1),n.setHours(23,59,59,999),n}();const r=()=>{i._updatePeriodTimeout=window.setTimeout((()=>{i.start=ye(),i.end=ve(),r()}),me(ve(),1).getTime()-Date.now())};return r(),i.clearPrefs=()=>{i.prefs=void 0},i.setPeriod=(e,t)=>{var o;i.start=e,i.end=t,i.start.getTime()!==ye().getTime()||(null===(o=i.end)||void 0===o?void 0:o.getTime())!==ve().getTime()||i._updatePeriodTimeout?i._updatePeriodTimeout&&(clearTimeout(i._updatePeriodTimeout),i._updatePeriodTimeout=void 0):r()},i.setCompare=e=>{i.compare=e},i};class Oe{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,o){this._$Ct=e,this._$AM=t,this._$Ci=o}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}const ze="important",Ne=" !"+ze,Me=(e=>(...t)=>({_$litDirective$:e,values:t}))(class extends Oe{constructor(e){var t;if(super(e),1!==e.type||"style"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,o)=>{const i=e[o];return null==i?t:t+`${o=o.includes("-")?o:o.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`}),"")}update(e,[t]){const{style:o}=e.element;if(void 0===this.ut){this.ut=new Set;for(const e in t)this.ut.add(e);return this.render(t)}this.ut.forEach((e=>{null==t[e]&&(this.ut.delete(e),e.includes("-")?o.removeProperty(e):o[e]="")}));for(const e in t){const i=t[e];if(null!=i){this.ut.add(e);const t="string"==typeof i&&i.endsWith(Ne);e.includes("-")||t?o.setProperty(e,t?i.slice(0,-11):i,t?ze:""):o[e]=i}}return U}});var Pe,De;function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}!function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(Pe||(Pe={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(De||(De={}));var Ue=function(e,t){var o=He({maximumFractionDigits:2},t);if("string"!=typeof e)return o;if(!t||!t.minimumFractionDigits&&!t.maximumFractionDigits){var i=e.indexOf(".")>-1?e.split(".")[1].length:0;o.minimumFractionDigits=i,o.maximumFractionDigits=i}return o};const Ie=r`:host{--cursor-type:'default'}ha-card{height:100%;overflow:hidden;padding:1rem;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{cursor:var(--cursor-type);width:100%;max-width:250px;direction:ltr}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:15px;margin-top:8px}ha-svg-icon{position:absolute;right:1rem;top:1rem;color:var(--secondary-text-color)}simple-tooltip>span{font-size:12px;line-height:12px}simple-tooltip{width:80%;max-width:250px;top:1rem!important}`;var Re={autarky:"Autarky",self_consumption:"Self Consumption"},qe={autarky:"The Autarky gauge shows how much of your home's energy consumption is covered by your own systems such as solar production or home batteries.",self_consumption:"The Self Consumption gauge shows how much of your home's solar production is consumed by your home. This value is beneficial, meaning the more of your solar production that is consumed by your home, the better and the higher the number."},Le={gauge_type:"Gauge Type",tooltip:"Tooltip",show_tooltip:"Show Tooltip",show_name:"Show Name",only_for_tap_action:"Only for Tap Action"},Fe={gauge_name:Re,tooltip:qe,ui_editor:Le},We={autarky:"Autarkie",self_consumption:"Selbstkonsum"},Be={autarky:"Die Autarkieanzeige zeigt an, wie viel des Energieverbrauchs Ihres Hauses durch Ihre eigenen Systeme wie Solaranlagen oder Hausbatterien gedeckt wird.",self_consumption:"Die Eigenverbrauchsanzeige zeigt an, wie viel von der Solarproduktion Ihres Hauses von Ihrem Haus verbraucht wird. Dieser Wert ist vorteilhaft, d. h. je mehr von Ihrer Solarproduktion von Ihrem Haus verbraucht wird, desto besser und höher ist die Zahl."},Ve={gauge_type:"Art der Anzeige",tooltip:"Werkzeugtipp",show_tooltip:"Werkzeugtipp anzeigen",show_name:"Name anzeigen",only_for_tap_action:"Nur für Aktion"},Ye={gauge_name:We,tooltip:Be,ui_editor:Ve},Ge={autarky:"Autarquia",self_consumption:"Autoconsumo"},Ze={autarky:"O manómetro de Autarquia mostra quanto do consumo de energia da sua casa é coberto pelos seus próprios sistemas, como produção solar ou baterias domésticas.",self_consumption:"O manómetro de Autoconsumo mostra quanto da produção solar da sua casa é consumida internamente. Esse valor é beneficiário, ou seja, quanto mais da sua produção solar for consumida pela sua casa, melhor e maior o número."},Je={gauge_type:"Tipo de Medidor",tooltip:"Dica de ferramenta",show_tooltip:"Mostrar dica de ferramenta",show_name:"Mostrar nome",only_for_tap_action:"Apenas para ação de toque"},Ke={gauge_name:Ge,tooltip:Ze,ui_editor:Je},Qe={autarky:"Autarquia",self_consumption:"Autoconsumo"},Xe={autarky:"O manómetro de Autarquia mostra quanto do consumo de energia da sua casa é coberto pelos seus próprios sistemas, como produção solar ou baterias domésticas.",self_consumption:"O manómetro de Autoconsumo mostra quanto da produção solar da sua casa é consumida internamente. Esse valor é beneficiário, ou seja, quanto mais da sua produção solar for consumida pela sua casa, melhor e maior o número."},et={gauge_type:"Tipo de Medidor",tooltip:"Dica de ferramenta",show_tooltip:"Mostrar dica de ferramenta",show_name:"Mostrar nome",only_for_tap_action:"Apenas para ação de toque"},tt={gauge_name:Qe,tooltip:Xe,ui_editor:et},ot={autarky:"Autarquía",self_consumption:"Autoconsumo"},it={autarky:"El medidor de Autarquía muestra cuánto del consumo de energía de tu hogar está cubierto por tus propios sistemas, como la producción solar o las baterías domésticas.",self_consumption:"El medidor de Autoconsumo muestra cuánta producción solar de tu hogar es consumida por el mismo. Este valor es beneficioso, lo que significa que cuanto más de tu producción solar sea consumida por tu hogar, mejor será y mayor será el número."},nt={gauge_type:"Tipo de Medidor",tooltip:"Información sobre herramientas",show_tooltip:"Mostrar Información sobre herramientas",show_name:"Mostrar Nombre",only_for_tap_action:"Solo para Acción al Tocar"},st={gauge_name:ot,tooltip:it,ui_editor:nt},rt={autarky:"Autarkie",self_consumption:"Eigenverbruik"},at={autarky:"De Autarkie-meter laat zien hoeveel van het energieverbruik van je huis wordt gedekt door je eigen systemen, zoals zonne-energieproductie of thuisbatterijen.",self_consumption:"De Eigenverbruik-meter laat zien hoeveel van de zonne-energieproductie van je huis wordt verbruikt door je huis. Dit is gunstig, wat betekent dat hoe meer van je zonne-energieproductie door je huis wordt verbruikt, hoe beter en hoe hoger het getal."},lt={gauge_type:"Type Meter",tooltip:"Tooltip",show_tooltip:"Toon Tooltip",show_name:"Toon Naam",only_for_tap_action:"Alleen voor Tikactie"},ut={gauge_name:rt,tooltip:at,ui_editor:lt},ct={autarky:"Autarchia",self_consumption:"Autoconsumo"},dt={autarky:"Il medidor di Autarchia mostra quanto del consumo energetico della tua casa è coperto dai tuoi stessi sistemi, come la produzione solare o le batterie domestiche.",self_consumption:"Il medidor di Autoconsumo mostra quanto della produzione solare della tua casa viene consumata dalla stessa. Questo valore è vantaggioso, il che significa che più produzione solare viene consumata dalla tua casa, migliore è il valore e più alto sarà il numero."},ht={gauge_type:"Tipo di Medidor",tooltip:"Tooltip",show_tooltip:"Mostra Tooltip",show_name:"Mostra Nome",only_for_tap_action:"Solo per Azione al Tap"},pt={gauge_name:ct,tooltip:dt,ui_editor:ht},mt={autarky:"Autarcie",self_consumption:"Autoconsommation"},gt={autarky:"Le jauge Autarcie montre quelle part de la consommation d'énergie de votre maison est couverte par vos propres systèmes, tels que la production solaire ou les batteries domestiques.",self_consumption:"La jauge Autoconsommation montre quelle part de la production solaire de votre maison est consommée par celle-ci. Cette valeur est bénéfique, ce qui signifie que plus votre maison consomme de votre production solaire, mieux c'est et plus le chiffre est élevé."},ft={gauge_type:"Type de Jauge",tooltip:"Info-bulle",show_tooltip:"Afficher l'info-bulle",show_name:"Afficher le Nom",only_for_tap_action:"Uniquement pour l'action de tapotement"},_t={gauge_name:mt,tooltip:gt,ui_editor:ft},vt={autarky:"Автаркия",self_consumption:"Самопотребление"},yt={autarky:"Индикатор Автаркии показывает, сколько энергопотребления вашего дома покрывается собственными системами, такими как солнечная энергия или домашние аккумуляторы.",self_consumption:"Индикатор Самопотребления показывает, сколько солнечной энергии, производимой вашим домом, потребляется им же. Это значение является положительным, что означает, что чем больше солнечной энергии потребляет ваш дом, тем лучше и выше значение."},bt={gauge_type:"Тип индикатора",tooltip:"Подсказка",show_tooltip:"Показать подсказку",show_name:"Показать название",only_for_tap_action:"Только для действия при касании"},wt={gauge_name:vt,tooltip:yt,ui_editor:bt},$t={autarky:"Itsevoittoisuus",self_consumption:"Oman kulutuksen osuus"},At={autarky:"Itsevoittoisuuden mittari näyttää kuinka suuri osa kotisi energiankulutuksesta katetaan omilla järjestelmilläsi, kuten aurinkopaneelien tuotannolla tai kotiakkujen avulla.",self_consumption:"Oman kulutuksen osuuden mittari näyttää kuinka paljon kotisi aurinkopaneelien tuotannosta kuluu kotisi omaan käyttöön. Tämä arvo on hyödyllinen, mikä tarkoittaa, että mitä enemmän aurinkopaneelien tuotannosta kulutetaan kotisi toimesta, sitä parempi ja korkeampi on lukema."},kt={gauge_type:"Mittarin tyyppi",tooltip:"Työkalun vihje",show_tooltip:"Näytä työkalun vihje",show_name:"Näytä nimi",only_for_tap_action:"Vain napautustoiminnolle"},St={gauge_name:$t,tooltip:At,ui_editor:kt},Et={autarky:"Autarkia",self_consumption:"Samozużycie"},jt={autarky:"Wskaźnik Autarkii pokazuje, ile z zapotrzebowania energetycznego Twojego domu pokrywają własne systemy, takie jak produkcja energii słonecznej lub baterie domowe.",self_consumption:"Wskaźnik Samozużycia pokazuje, ile energii słonecznej wyprodukowanej przez Twój dom jest zużywane przez ten dom. Ta wartość jest korzystna, co oznacza, że im więcej energii słonecznej jest zużywane przez Twój dom, tym lepiej i wyższa jest wartość."},xt={gauge_type:"Typ wskaźnika",tooltip:"Opis",show_tooltip:"Pokaż opis",show_name:"Pokaż nazwę",only_for_tap_action:"Tylko dla akcji dotknięcia"},Ct={gauge_name:Et,tooltip:jt,ui_editor:xt};const Tt={en:Object.freeze({__proto__:null,gauge_name:Re,tooltip:qe,ui_editor:Le,default:Fe}),de:Object.freeze({__proto__:null,gauge_name:We,tooltip:Be,ui_editor:Ve,default:Ye}),pt:Object.freeze({__proto__:null,gauge_name:Ge,tooltip:Ze,ui_editor:Je,default:Ke}),pt_BR:Object.freeze({__proto__:null,gauge_name:Qe,tooltip:Xe,ui_editor:et,default:tt}),es:Object.freeze({__proto__:null,gauge_name:ot,tooltip:it,ui_editor:nt,default:st}),nl:Object.freeze({__proto__:null,gauge_name:rt,tooltip:at,ui_editor:lt,default:ut}),it:Object.freeze({__proto__:null,gauge_name:ct,tooltip:dt,ui_editor:ht,default:pt}),fr:Object.freeze({__proto__:null,gauge_name:mt,tooltip:gt,ui_editor:ft,default:_t}),ru:Object.freeze({__proto__:null,gauge_name:vt,tooltip:yt,ui_editor:bt,default:wt}),fi:Object.freeze({__proto__:null,gauge_name:$t,tooltip:At,ui_editor:kt,default:St}),pl:Object.freeze({__proto__:null,gauge_name:Et,tooltip:jt,ui_editor:xt,default:Ct})};function Ot(e,t="",o=""){const i=(localStorage.getItem("selectedLanguage")||"en").replace(/['"]+/g,"").replace("-","_");let n;try{n=e.split(".").reduce(((e,t)=>e[t]),Tt[i])}catch(t){n=e.split(".").reduce(((e,t)=>e[t]),Tt.en)}return void 0===n&&(n=e.split(".").reduce(((e,t)=>e&&e[t]),Tt.en)),""!==t&&""!==o&&(n=n.replace(t,o)),n||e}const zt={red:"var(--error-color)",green:"var(--success-color)",yellow:"var(--warning-color)",normal:"var(--info-color)"};!function(e){const t=window;t.customCards=t.customCards||[],t.customCards.push(Object.assign(Object.assign({},{type:"energy-gauge-bundle-card",name:"Energy Gauge Bundle Card",description:"A collection of gauges for energy monitoring"}),{preview:!0,documentationURL:"https://github.com/flixlix/energy-gauge-bundle-card"}))}();let Nt=class extends(le(te)){constructor(){super(...arguments),this.min=0,this.max=100,this.needle=!1,this.unit_of_measurement="%",this.decimals=1,this.hassSubscribeRequiredHostProps=["_config"]}connectedCallback(){super.connectedCallback(),(async()=>{customElements.get("ha-gauge")||(await window.loadCardHelpers()).createCardElement({type:"gauge"})})()}static async getConfigElement(){return await Promise.resolve().then((function(){return Xt})),document.createElement("energy-gauge-bundle-card-editor")}hassSubscribe(){var e;return[Te(this.hass,{key:null===(e=this._config)||void 0===e?void 0:e.collection_key}).subscribe((e=>{this._data=e}))]}getCardSize(){return 4}setConfig(e){this._config=e}render(){var e,t,o,i,n,s,r,a,l;if(!this._config||!this.hass)return I;if(!this._data)return H`${this.hass.localize("ui.panel.lovelace.cards.energy.loading")}`;const u=(e=>((e,t)=>{const o={};for(const i of e){const e=t(i);e in o?o[e].push(i):o[e]=[i]}return o})(this._data.prefs.energy_sources,(e=>e.type)))();if(!u.solar&&!u.battery||!u.grid)return I;const c=null!==(e=u.solar&&ke(this._data.stats,u.solar.map((e=>e.stat_energy_from))))&&void 0!==e?e:0,d=null!==(t=ke(this._data.stats,u.grid[0].flow_to.map((e=>e.stat_energy_to))))&&void 0!==t?t:0,h=null!==(o=u.battery&&ke(this._data.stats,u.battery.map((e=>e.stat_energy_from))))&&void 0!==o?o:0,p=null!==(i=u.battery&&ke(this._data.stats,u.battery.map((e=>e.stat_energy_to))))&&void 0!==i?i:0,m=null!==(n=ke(this._data.stats,u.grid[0].flow_from.map((e=>e.stat_energy_from))))&&void 0!==n?n:0,g=h+m+c-d-p,f=g>0?(g-m)/g*100:0,_=Math.max(0,c-d),v=c>0?_/c*100:0,y={value:f,name:Ot("gauge_name.autarky"),tooltip:Ot("tooltip.autarky"),needle:!0,severity:{green:70,yellow:30,red:0}},b={value:v,name:Ot("gauge_name.self_consumption"),tooltip:Ot("tooltip.self_consumption"),severity:{green:70,yellow:30,red:0}};if("self_consumption"===this._config.gauge_type)for(const e in b)this[e]=b[e];else for(const e in y)this[e]=y[e];let w;for(w in this._config)w in this&&(this[w]=this._config[w]);return this.style.setProperty("--cursor-type",this._config.clickable?"pointer":"default"),H`<ha-card .header="${this._config.title}">${void 0!==this.value?H`${!1!==(null===(s=this._config.show)||void 0===s?void 0:s.tooltip)?H`<ha-svg-icon id="info" .path="${"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}"></ha-svg-icon><simple-tooltip animation-delay="0" for="info" position="left"><span>${this.tooltip}</span></simple-tooltip>`:I}<ha-gauge @click="${this._handleClick}" .locale="${this.hass.locale}" min="${this.min}" max="${this.max}" .value="${this.value}" label="${this.unit_of_measurement}" .valueText="${function(e,t,o){var i=t?function(e){switch(e.number_format){case Pe.comma_decimal:return["en-US","en"];case Pe.decimal_comma:return["de","es","it"];case Pe.space_comma:return["fr","sv","cs"];case Pe.system:return;default:return e.language}}(t):void 0;if(Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},(null==t?void 0:t.number_format)!==Pe.none&&!Number.isNaN(Number(e))&&Intl)try{return new Intl.NumberFormat(i,Ue(e,o)).format(Number(e))}catch(t){return console.error(t),new Intl.NumberFormat(void 0,Ue(e,o)).format(Number(e))}return"string"==typeof e?e:function(e,t){return void 0===t&&(t=2),Math.round(e*Math.pow(10,t))/Math.pow(10,t)}(e,null==o?void 0:o.maximumFractionDigits).toString()+("currency"===(null==o?void 0:o.style)?" "+o.currency:"")}(this.value,this.hass.locale,{maximumFractionDigits:null!==(a=null===(r=this._config)||void 0===r?void 0:r.decimals)&&void 0!==a?a:null==this?void 0:this.decimals})}" .needle="${this.needle}" .levels="${this.needle?this._severityLevels(this.severity):void 0}" style="${Me({"--gauge-color":this._computeSeverity(this.value,this.severity)})}"></ha-gauge>${!1!==(null===(l=this._config.show)||void 0===l?void 0:l.name)?H`<div class="name">${this.name}</div>`:I}`:0===c?this.hass.localize("ui.panel.lovelace.cards.energy.solar_consumed_gauge.not_produced_solar_energy"):this.hass.localize("ui.panel.lovelace.cards.energy.solar_consumed_gauge.self_consumed_solar_could_not_calc")}</ha-card>`}_handleClick(){var e;(null===(e=this._config)||void 0===e?void 0:e.clickable)&&this._config.entity&&((e,t,o,i)=>{i=i||{},o=null==o?{}:o;const n=new Event("hass-more-info",{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});n.detail=o,e.dispatchEvent(n)})(this,0,{entityId:this._config.entity})}_severityLevels(e){const t=this._config.severity||e;return t?Object.keys(t).map((e=>({level:t[e],stroke:zt[e]}))):[{level:0,stroke:zt.normal}]}_computeSeverity(e,t){if(this._config.needle)return;const o=this._config.severity||t;if(!o)return zt.normal;const i=Object.keys(o).map((e=>[e,o[e]]));for(const e of i)if(null==zt[e[0]]||isNaN(e[1]))return zt.normal;return i.sort(((e,t)=>e[1]-t[1])),e>=i[0][1]&&e<i[1][1]?zt[i[0][0]]:e>=i[1][1]&&e<i[2][1]?zt[i[1][0]]:e>=i[2][1]?zt[i[2][0]]:zt.normal}};Nt.styles=Ie,e([se({attribute:!1})],Nt.prototype,"hass",void 0),e([re()],Nt.prototype,"_config",void 0),e([re()],Nt.prototype,"_data",void 0),e([re()],Nt.prototype,"min",void 0),e([re()],Nt.prototype,"max",void 0),e([re()],Nt.prototype,"value",void 0),e([re()],Nt.prototype,"needle",void 0),e([re()],Nt.prototype,"unit_of_measurement",void 0),e([re()],Nt.prototype,"severity",void 0),e([re()],Nt.prototype,"decimals",void 0),e([re()],Nt.prototype,"name",void 0),e([re()],Nt.prototype,"tooltip",void 0),Nt=e([ie("energy-gauge-bundle-card")],Nt);class Mt extends TypeError{constructor(e,t){let o;const{message:i,...n}=e,{path:s}=e;super(0===s.length?i:"At path: "+s.join(".")+" -- "+i),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,n),this.name=this.constructor.name,this.failures=()=>{var i;return null!=(i=o)?i:o=[e,...t()]}}}function Pt(e){return"object"==typeof e&&null!=e}function Dt(e){return"string"==typeof e?JSON.stringify(e):""+e}function Ht(e,t,o,i){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:n,branch:s}=t,{type:r}=o,{refinement:a,message:l="Expected a value of type `"+r+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+Dt(i)+"`"}=e;return{value:i,type:r,refinement:a,key:n[n.length-1],path:n,branch:s,...e,message:l}}function*Ut(e,t,o,i){(function(e){return Pt(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const n of e){const e=Ht(n,t,o,i);e&&(yield e)}}function*It(e,t,o){void 0===o&&(o={});const{path:i=[],branch:n=[e],coerce:s=!1,mask:r=!1}=o,a={path:i,branch:n};if(s&&(e=t.coercer(e,a),r&&"type"!==t.type&&Pt(t.schema)&&Pt(e)&&!Array.isArray(e)))for(const o in e)void 0===t.schema[o]&&delete e[o];let l=!0;for(const o of t.validator(e,a))l=!1,yield[o,void 0];for(let[o,u,c]of t.entries(e,a)){const t=It(u,c,{path:void 0===o?i:[...i,o],branch:void 0===o?n:[...n,u],coerce:s,mask:r});for(const i of t)i[0]?(l=!1,yield[i[0],void 0]):s&&(u=i[1],void 0===o?e=u:e instanceof Map?e.set(o,u):e instanceof Set?e.add(u):Pt(e)&&(e[o]=u))}if(l)for(const o of t.refiner(e,a))l=!1,yield[o,void 0];l&&(yield[void 0,e])}class Rt{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:o,validator:i,refiner:n,coercer:s=(e=>e),entries:r=function*(){}}=e;this.type=t,this.schema=o,this.entries=r,this.coercer=s,this.validator=i?(e,t)=>Ut(i(e,t),t,this,e):()=>[],this.refiner=n?(e,t)=>Ut(n(e,t),t,this,e):()=>[]}assert(e){return qt(e,this)}create(e){return function(e,t){const o=Lt(e,t,{coerce:!0});if(o[0])throw o[0];return o[1]}(e,this)}is(e){return function(e,t){return!Lt(e,t)[0]}(e,this)}mask(e){return function(e,t){const o=Lt(e,t,{coerce:!0,mask:!0});if(o[0])throw o[0];return o[1]}(e,this)}validate(e,t){return void 0===t&&(t={}),Lt(e,this,t)}}function qt(e,t){const o=Lt(e,t);if(o[0])throw o[0]}function Lt(e,t,o){void 0===o&&(o={});const i=It(e,t,o),n=function(e){const{done:t,value:o}=e.next();return t?void 0:o}(i);if(n[0]){return[new Mt(n[0],(function*(){for(const e of i)e[0]&&(yield e[0])})),void 0]}return[void 0,n[1]]}function Ft(e,t){return new Rt({type:e,schema:null,validator:t})}function Wt(){return Ft("boolean",(e=>"boolean"==typeof e))}function Bt(){return Ft("number",(e=>"number"==typeof e&&!isNaN(e)||"Expected a number, but received: "+Dt(e)))}function Vt(e){const t=e?Object.keys(e):[],o=Ft("never",(()=>!1));return new Rt({type:"object",schema:e||null,*entries(i){if(e&&Pt(i)){const n=new Set(Object.keys(i));for(const o of t)n.delete(o),yield[o,i[o],e[o]];for(const e of n)yield[e,i[e],o]}},validator:e=>Pt(e)||"Expected an object, but received: "+Dt(e),coercer:e=>Pt(e)?{...e}:e})}function Yt(e){return new Rt({...e,validator:(t,o)=>void 0===t||e.validator(t,o),refiner:(t,o)=>void 0===t||e.refiner(t,o)})}function Gt(){return Ft("string",(e=>"string"==typeof e||"Expected a string, but received: "+Dt(e)))}var Zt=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Jt(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!((i=e[o])===(n=t[o])||Zt(i)&&Zt(n)))return!1;var i,n;return!0}const Kt=async()=>{var e,t;if(customElements.get("ha-form"))return;const o=await(null===(t=(e=window).loadCardHelpers)||void 0===t?void 0:t.call(e));if(!o)return;const i=await o.createCardElement({type:"entity"});i&&await i.getConfigElement()};let Qt=class extends te{constructor(){super(...arguments),this.showOther=!1,this._schema=function(e,t){void 0===t&&(t=Jt);var o=null;function i(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];if(o&&o.lastThis===this&&t(i,o.lastArgs))return o.lastResult;var s=e.apply(this,i);return o={lastResult:s,lastArgs:i,lastThis:this},s}return i.clear=function(){o=null},i}((e=>[{name:"gauge_type",selector:{select:{options:["autarky","self_consumption"].map((e=>({value:e,label:Ot(`gauge_name.${e}`)}))),custom_value:!0}}},{name:"entity",label:`${this.hass.localize("ui.panel.lovelace.editor.card.generic.entity")} (${Ot("ui_editor.only_for_tap_action")})`,selector:{entity:{domain:["counter","input_number","number","sensor"]}}},{name:"",type:"grid",schema:[{name:"name",selector:{text:{}}},{name:"unit_of_measurement",selector:{text:{}}}]},{name:"show",type:"grid",schema:[{name:"tooltip",label:"show_tooltip",selector:{boolean:{}}},{name:"name",label:"show_name",selector:{boolean:{}}}]},{name:"tooltip",selector:{text:{}}},{name:"",type:"grid",schema:[{name:"min",default:0,selector:{number:{mode:"box"}}},{name:"max",default:100,selector:{number:{mode:"box"}}}]},{name:"",type:"grid",schema:[{name:"needle",selector:{boolean:{}}},{name:"show_severity",selector:{boolean:{}}}]},...e?[{name:"severity",type:"grid",schema:[{name:"green",selector:{number:{mode:"box"}}},{name:"yellow",selector:{number:{mode:"box"}}},{name:"red",selector:{number:{mode:"box"}}}]}]:[]])),this._computeLabelCallback=e=>{switch(e.name){case"name":return this.hass.localize("ui.panel.lovelace.editor.card.generic.name");case"entity":return`${this.hass.localize("ui.panel.lovelace.editor.card.generic.entity")}`;case"max":return this.hass.localize("ui.panel.lovelace.editor.card.generic.maximum");case"min":return this.hass.localize("ui.panel.lovelace.editor.card.generic.minimum");case"show_severity":return this.hass.localize("ui.panel.lovelace.editor.card.gauge.severity.define");case"needle":return this.hass.localize("ui.panel.lovelace.editor.card.gauge.needle_gauge");case"unit_of_measurement":return this.hass.localize("ui.panel.lovelace.editor.card.generic.unit");case"green":case"yellow":case"red":return this.hass.localize(`ui.panel.lovelace.editor.card.gauge.severity.${e.name}`);default:return Ot(`ui_editor.${e.name}`)}}}async setConfig(e){var t,o,i,n,s,r,a,l,u,c;qt(e,function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];const i="type"===t[0].type,n=t.map((e=>e.schema)),s=Object.assign({},...n);return i?function(e){const t=Object.keys(e);return new Rt({type:"type",schema:e,*entries(o){if(Pt(o))for(const i of t)yield[i,o[i],e[i]]},validator:e=>Pt(e)||"Expected an object, but received: "+Dt(e)})}(s):Vt(s)}(Vt({type:Gt(),view_layout:Yt(Gt())}),Vt({entity:Yt(Gt()),gauge_type:Yt(Gt()),min:Yt(Bt()),max:Yt(Bt()),unit_of_measurement:Yt(Gt()),needle:Yt(Wt()),severity:Yt(Vt({green:Yt(Bt()),yellow:Yt(Bt()),red:Yt(Bt()),normal:Yt(Bt())})),decimals:Yt(Ft("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||"Expected an integer, but received: "+Dt(e)))),show:Yt(Vt({tooltip:Yt(Wt()),name:Yt(Wt())})),name:Yt(Gt()),tooltip:Yt(Gt()),clickable:Yt(Wt())}))),this._config=e,e.gauge_type=(null===(t=this._config)||void 0===t?void 0:t.gauge_type)||"autarky",e.needle=null===(i=null===(o=this._config)||void 0===o?void 0:o.needle)||void 0===i||i,e.min=null!==(s=null===(n=this._config)||void 0===n?void 0:n.min)&&void 0!==s?s:0,e.max=null!==(a=null===(r=this._config)||void 0===r?void 0:r.max)&&void 0!==a?a:100,e.decimals=(null===(l=this._config)||void 0===l?void 0:l.decimals)||1,e.show?e.show.name=null===(c=null===(u=this._config)||void 0===u?void 0:u.show)||void 0===c?void 0:c.name:e.show={name:!0}}connectedCallback(){super.connectedCallback(),Kt()}render(){if(!this.hass||!this._config)return I;const e=Object.assign({show_severity:void 0!==this._config.severity},this._config),t=this._schema(void 0!==this._config.severity);return H`<ha-form .hass="${this.hass}" .data="${e}" .schema="${t}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form>`}_valueChanged(e){var t,o,i;let n=e.detail.value;n.show_severity?n=Object.assign(Object.assign({},n),{severity:{green:n.green||(null===(t=n.severity)||void 0===t?void 0:t.green)||0,yellow:n.yellow||(null===(o=n.severity)||void 0===o?void 0:o.yellow)||0,red:n.red||(null===(i=n.severity)||void 0===i?void 0:i.red)||0}}):!n.show_severity&&n.severity&&delete n.severity,delete n.show_severity,delete n.green,delete n.yellow,delete n.red,function(e,t,o,i){i=i||{},o=null==o?{}:o;var n=new Event("config-changed",{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});n.detail=o,e.dispatchEvent(n)}(this,0,{config:n})}static get styles(){return r`ha-form{width:100%}ha-icon-button{align-self:center}.entities-section *{background-color:red}.card-config{display:flex;flex-direction:column;justify-content:space-between;align-items:center;margin-bottom:10px}.config-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%}.config-header.sub-header{margin-top:24px}ha-icon{padding-bottom:2px;position:relative;top:-4px;right:1px}`}};e([se({attribute:!1})],Qt.prototype,"hass",void 0),e([re()],Qt.prototype,"_config",void 0),e([re()],Qt.prototype,"showOther",void 0),Qt=e([ie("energy-gauge-bundle-card-editor")],Qt);var Xt=Object.freeze({__proto__:null,loadHaForm:Kt,get EnergyGaugeBundleCardEditor(){return Qt}});export{Nt as EnergyGaugeBundleCard,zt as severityMap};
